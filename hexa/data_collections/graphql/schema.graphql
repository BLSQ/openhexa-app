# Collections
type Collection {
    id: String!
    name: String!
    author: User
    countries: [Country!]!
    tags: [Tag!]!
    description: String
    entries: CollectionEntryPage!
    authorizedActions: [CollectionAuthorizedActions!]!
    createdAt: DateTime!
    updatedAt: DateTime!
}
type CollectionPage {
    pageNumber: Int!
    totalPages: Int!
    totalItems: Int!
    items: [Collection!]!
}
type CollectionAuthorizedActions {
    canUpdate: Boolean!
    canDelete: Boolean!
}
input CreateCollectionInput {
    name: String!
    authorId: String
    countries: [CountryInput!]!
    tagIds: [String!]!
    description: String
}
type CreateCollectionResult {
    success: Boolean!
    errors: [CreateCollectionError!]!
    collection: Collection
}
enum CreateCollectionError {
    INVALID
}
input DeleteCollectionInput {
    id: String!
}
type DeleteCollectionResult {
    success: Boolean!
    errors: [DeleteCollectionError!]!
}
enum DeleteCollectionError {
    INVALID
}
extend type Query {
    collection(id: String!): Collection
    collections(page: Int, perPage: Int): CollectionPage!
}
extend type Mutation {
    createCollection(input: CreateCollectionInput!): CreateCollectionResult!
    deleteCollection(input: DeleteCollectionInput!): DeleteCollectionResult!
}

# Collection entries
interface CollectionEntry {
    id: String!
    type: CollectionEntryType!
    createdAt: DateTime!
    updatedAt: DateTime!
}
enum CollectionEntryType
type CollectionEntryPage {
    pageNumber: Int!
    totalPages: Int!
    totalItems: Int!
    items: [CollectionEntry!]!
}
input CreateCollectionEntryInput {
    entryType: CollectionEntryType!
    entryItemId: String!
}
type CreateCollectionEntryResult {
    success: Boolean!
    errors: [CreateCollectionEntryError!]!
    entry: CollectionEntry
}
enum CreateCollectionEntryError {
    INVALID
}
input DeleteCollectionEntryInput {
    id: String!
}
type DeleteCollectionEntryResult {
    success: Boolean!
    errors: [CreateCollectionEntryError!]!
    collection: Collection
}
enum DeleteCollectionEntryError {
    INVALID
}
extend type Mutation {
    createCollectionEntry(input: CreateCollectionEntryInput!): CreateCollectionEntryResult!
    deleteCollectionEntry(input: DeleteCollectionEntryInput!): DeleteCollectionEntryResult!
}

# App-specific permissions
extend type AuthorizedActions {
    createCollection: Boolean!
}