type Workspace {
  id: String!
  name: String!
  description: String
  memberships(page: Int, perPage: Int): WorkspaceMembershipPage!
  country: Country
  createdAt: DateTime!
  updatedAt: DateTime
  createdBy: User!
}

type WorkspacePage {
  pageNumber: Int!
  totalPages: Int!
  totalItems: Int!
  items: [Workspace!]!
}

enum WorkspaceMembershipRole {
  ADMIN
  EDITOR
  VIEWER
}

type WorkspaceMembership {
  id: String!
  user: User!
  workspace: Workspace!
  role: WorkspaceMembershipRole!
  createdAt: DateTime!
  updatedAt: DateTime
}

type WorkspaceMembershipPage {
  pageNumber: Int!
  totalPages: Int!
  totalItems: Int!
  items: [WorkspaceMembership!]!
}

extend type Query {
  workspace(id: String!): Workspace
  workspaces(page: Int, perPage: Int): WorkspacePage!
}

enum CreateWorkspaceError {
  PERMISSION_DENIED
}

type CreateWorkspaceResult {
  success: Boolean!
  errors: [CreateWorkspaceError!]!
  workspace: Workspace
}

input CreateWorkspaceInput {
  name: String!
  description: String
  country: CountryInput
}

extend type Mutation {
  createWorkspace(input: CreateWorkspaceInput!): CreateWorkspaceResult!
}
