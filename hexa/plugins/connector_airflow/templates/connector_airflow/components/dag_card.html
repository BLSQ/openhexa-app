{% load embed i18n static %}

{% with title=dag.display_name subtitle=dag.description|default:_("No description") image_alt=_("Airflow") %}
    {% static "connector_airflow/img/symbol.svg" as image_src %}
    {% embed "core/components/card/card.html" %}
        {% slot content %}
            {% embed "core/components/description_list/list.html" %}
                {% slot content %}
                    {# Cluster #}
                    {% embed "core/components/description_list/item.html" with term=_("Cluster") %}
                        {% slot definition %}{{ dag.cluster.name }}{% endslot %}
                    {% endembed %}
                    {# Airflow ID #}
                    {% embed "core/components/description_list/item.html" with term=_("Airflow ID") %}
                        {% slot definition %}{{ dag.airflow_id }}{% endslot %}
                    {% endembed %}
                    {# Content #}
                    {% embed "core/components/description_list/item.html" with term=_("Content") %}
                        {% slot definition %}
                            {{ dag.content_summary|default:"-" }}
                        {% endslot %}
                    {% endembed %}
                    {# Location #}
                    {% embed "core/components/description_list/item.html" with term=_("Location") %}
                        {% slot definition %}
                            {% include "core/components/description_list/item_location.html" with countries=dag.countries %}
                        {% endslot %}
                    {% endembed %}
                    {# Owner #}
                    {% embed "core/components/description_list/item.html" with term=_("Owner") %}
                        {% slot definition %}
                            {% with owner=dag.owner|default:dag.cluster.owner %}
                                {% if owner %}
                                    {{ owner.name }}
                                    ({{ owner.get_organization_type_display }})
                                    {% if owner.url %}
                                        {% include "core/components/description_list/item_link.html" with url=owner.url label=_("Official website") %}
                                    {% endif %}
                                {% else %}
                                    -
                                {% endif %}
                            {% endwith %}
                        {% endslot %}
                    {% endembed %}
                    {# Contact #}
                    {% embed "core/components/description_list/item.html" with term=_("Contact") %}
                        {% slot definition %}
                            {% with owner=dag.owner|default:dag.cluster.owner %}
                                {% if owner.contact_info %}
                                    {{ owner.contact_info|linebreaks|urlize }}
                                {% else %}
                                    -
                                {% endif %}
                            {% endwith %}
                        {% endslot %}
                    {% endembed %}
                    {# Tags #}
                    {% embed "core/components/description_list/item.html" with term=_("Tags") %}
                        {% slot definition %}
                            {% include "core/components/description_list/item_tags.html" with tags=cluster.tags %}
                        {% endslot %}
                    {% endembed %}
                {% endslot %}
            {% endembed %}
        {% endslot %}
    {% endembed %}
{% endwith %}
