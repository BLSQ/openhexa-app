{% load colors date_utils embed i18n static %}

{% url "connector_airflow:dag_config_run_list" dag.environment.id dag.id as refresh_url %}
{% embed "core/components/section/page_section.html" with refresh_url=refresh_url %}
    {% slot header %}
        {% include "core/components/section/section_heading_simple.html" with title=_("DAG configuration run") %}
    {% endslot %}
    {% slot content %}
        {% embed "core/components/table/table.html" %}
            {% slot header_cells %}
                {% include "core/components/table/header_cell.html" with label=_("Run ID") %}
                {% include "core/components/table/header_cell.html" with label=_("Execution date") %}
                {% include "core/components/table/header_cell.html" with label=_("State") %}
                {% include "core/components/table/header_cell.html" with label=_("Last refreshed at") %}
            {% endslot %}
            {% slot rows %}
                {% for run in dag_config_runs %}
                    {% embed "core/components/table/row.html" %}
                        {% slot content %}
                            {# Run ID #}
                            {% include "core/components/table/cell_first.html" with label=run.run_id %}
                            {# Execution date #}
                            {% include "core/components/table/cell.html" with label=run.execution_date|format_date %}
                            {# State #}
                            {% include "core/components/table/cell_badge.html" with label=run.get_state_display color=run|status_color %}
                            {# Last refreshed at #}
                            {% include "core/components/table/cell.html" with label=run.last_refreshed_at|format_date %}
                        {% endslot %}
                    {% endembed %}
                {% empty %}
                    {% include "core/components/table/cell_empty.html" with colspan=5 %}
                {% endfor %}
            {% endslot %}
        {% endembed %}
    {% endslot %}
{% endembed %}