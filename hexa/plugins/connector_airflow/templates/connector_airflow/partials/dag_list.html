{% load date_utils embed i18n static %}

{% embed "core/components/section/page_section.html" %}
    {% slot header %}
        {% include "core/components/section/section_heading_simple.html" with title=_("DAGs") %}
    {% endslot %}
    {% slot content %}
        {% embed "core/components/table/table.html" %}
            {% slot header_cells %}
                {% include "core/components/table/header_cell.html" with label=_("ID") %}
                {% include "core/components/table/header_cell.html" with label=_("Content") %}
                {% include "core/components/table/header_cell.html" with label=_("Created at") %}
                {% include "core/components/table/header_cell.html" with label=_("Last run at") %}
                {% include "core/components/table/header_cell.html" with label=_("View") sr_only=True %}
            {% endslot %}
            {% slot rows %}
                {% for dag in environment.dag_set.all %}
                    {% url "connector_airflow:dag_detail" environment.pk dag.pk as detail_url %}
                    <tr>
                        {# DAG id #}
                        {% include "core/components/table/cell_first.html" with url=detail_url label=dag.airflow_id %}
                        {# Content #}
                        {% include "core/components/table/cell.html" with label=dag.content_summary %}
                        {# Created at #}
                        {% include "core/components/table/cell.html" with label=dag.hexa_created_at|format_date %}
                        {# Last executed at #}
                        {% include "core/components/table/cell.html" with label=dag.last_executed_at|format_date %}
                        {# View #}
                        {% include "core/components/table/cell_link.html" with url=detail_url label=_("View") %}
                    </tr>
                {% empty %}
                    {% include "core/components/table/cell_empty.html" with colspan=5 %}
                {% endfor %}
            {% endslot %}
        {% endembed %}
    {% endslot %}
{% endembed %}