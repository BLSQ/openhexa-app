{% load embed i18n %}

{# https://tailwindui.com/components/application-ui/data-display/description-lists#component-04580360f17ae91c953fda614240075e #}
<div
        class="sm:col-span-{{ span|default:1 }}"
        x-data="Editable('{{ key }}', '{{ value|escapejs }}', '{{ original_value|escapejs }}')"
>
    <dt class="text-sm font-medium text-gray-500">
        {% slot term %}{{ term|default:_("Missing term") }}{% endslot %}
    </dt>
    <dd class="mt-1 text-sm text-gray-900">
        <div
                class="hover:bg-gray-100 rounded border border-transparent p-1 -ml-1 cursor-pointer"
                x-show="!editing"
                x-text="displayedValue()"
                @click="toggle"
        >
        </div>
        <div
                x-show="editing"
                @click.away="toggle"
        >
            <label for="{{ key }}" class="sr-only">{{ term|default:_("Missing term") }}</label>
            <input
                    type="text"
                    name="{{ key }}"
                    id="{{ key }}"
                    class="p-1 -ml-1 shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"
                    autocomplete="off"
                    x-model="value"
                    x-ref="input"
                    @change="$dispatch('editablechange', {key, value })"
                    @keydown.enter="toggle"
            >
        </div>
        <div class="mt-1 text-xs text-gray-500">
            <template x-if="originalValue === ''">
                <span>{% translate "Empty in DHIS2" %}</span>
            </template>
            <template x-if="originalValue !== ''">
                <div>
                    <span x-show="isChanged()">{{ original_value }} {% translate "in DHIS2" %}</span>
                    <span x-show="!isChanged()">{% translate "Original value from DHIS2" %}</span>
                </div>
            </template>
        </div>
    </dd>
</div>
