query PipelinesPage {
  dags {
    totalPages
    totalItems
    items {
      label
      countries {
        ...CountryBadge_country
      }
      tags {
        ...Tag_tag
      }
      id
      externalId
      runs(orderBy: EXECUTION_DATE_DESC, perPage: 1) {
        items {
          id
          status
          executionDate
          ...PipelineRunStatusBadge_dagRun
        }
      }
    }
  }
}

query PipelinePage($id: String!, $page: Int) {
  dag(id: $id) {
    id
    label
    countries {
      ...CountryBadge_country
    }
    tags {
      ...Tag_tag
    }
    externalId
    schedule
    externalUrl
    template {
      code
      description
      sampleConfig
    }
    description
    schedule
    user {
      ...UserProperty_user
    }
    runs(page: $page, perPage: 15) {
      totalItems
      totalPages
      items {
        id
        triggerMode
        externalId
        externalUrl
        user {
          ...UserColumn_user
        }
        status
        executionDate
        lastRefreshedAt
        duration
        ...PipelineRunStatusBadge_dagRun
      }
    }
  }
}

query PipelineRunPage($pipelineId: String!, $runId: String!) {
  dagRun(id: $runId) {
    id
    externalId
    externalUrl
    executionDate

    status
    config
    outputs {
      ...PipelineRunOutputEntry_output
    }
    progress
    ...RunMessages_dagRun
    ...RunLogs_dagRun
    ...PipelineRunStatusBadge_dagRun
  }

  dag(id: $pipelineId) {
    id
    externalId
    label
  }
}

query PipelineConfigureRunPage($pipelineId: String!) {
  dag(id: $pipelineId) {
    id
    externalId
    template {
      sampleConfig
      description
    }
    description
    ...PipelineRunForm_dag
  }
}
