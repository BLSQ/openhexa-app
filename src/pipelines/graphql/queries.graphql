query PipelinesPage($page: Int, $perPage: Int = 15) {
  dags(page: $page, perPage: $perPage) {
    totalPages
    totalItems
    items {
      label
      countries {
        ...CountryBadge_country
      }
      tags {
        ...Tag_tag
      }
      id
      externalId
      runs(orderBy: EXECUTION_DATE_DESC, perPage: 1) {
        items {
          id
          status
          executionDate
          ...PipelineRunStatusBadge_dagRun
        }
      }
    }
  }
}

query PipelinePage($id: String!, $page: Int, $perPage: Int) {
  dag(id: $id) {
    id
    label
    countries {
      ...CountryBadge_country
    }
    tags {
      ...Tag_tag
    }
    externalId
    schedule
    externalUrl
    template {
      code
      description
      sampleConfig
    }
    description
    schedule
    user {
      ...UserProperty_user
    }
    runs(page: $page, perPage: $perPage) {
      totalItems
      totalPages
      items {
        id
        triggerMode
        externalId
        externalUrl
        user {
          ...UserColumn_user
        }
        status
        executionDate
        lastRefreshedAt
        duration
        ...PipelineRunStatusBadge_dagRun
      }
    }
  }
}

query PipelineRunPage($pipelineId: String!, $runId: String!) {
  dagRun(id: $runId) {
    id

    ...PipelineRunDataCard_dagRun
  }

  dag(id: $pipelineId) {
    id
    externalId
    label
    ...PipelineRunDataCard_dag
  }
}

query PipelineConfigureRunPage($pipelineId: String!) {
  dag(id: $pipelineId) {
    id
    label
    externalId
    template {
      sampleConfig
      description
    }
    description
    ...PipelineRunForm_dag
  }
}
